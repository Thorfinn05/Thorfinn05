name: Update Birthday Counter

on:
  # Runs on a schedule (every day at 1:00 AM UTC)
  schedule:
    - cron: '30 18 * * *'
    
  # Allows you to run this workflow manually from the Actions tab
  # (Good for testing!)
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      # 1. Checks out your repository code
      - name: Check out repository
        uses: actions/checkout@v4

      # 2. Sets up the Python version
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # 3. Runs your Python script
      - name: Run update script
        run: python update_birthday.py

      # 4. Commits the changes (if any) back to your repository
      - name: Commit and push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "feat: Update birthday countdown"
          file_pattern: README.md
